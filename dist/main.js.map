{"version":3,"file":"main.js","mappings":"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","sources":["webpack://bookshop/./src/js/slider.js","webpack://bookshop/webpack/bootstrap","webpack://bookshop/./src/js/cart.js","webpack://bookshop/./src/js/books.js"],"sourcesContent":["const slides = document.querySelectorAll('.img');\r\nconst dots = document.querySelectorAll('.dot');\r\nconst intervalSlider = 5000;\r\nlet slideIndex = 0;\r\n\r\nfunction sliderAuto() {\r\n    setInterval(function() {\r\n        slides[slideIndex].classList.remove('img_active');\r\n        dots[slideIndex].classList.remove('dot_active');\r\n    \r\n        slideIndex++;\r\n\r\n        if (slideIndex >= slides.length) {\r\n            slideIndex = 0;\r\n        }\r\n    \r\n        slides[slideIndex].classList.add('img_active');\r\n        dots[slideIndex].classList.add('dot_active');\r\n    }, intervalSlider);\r\n        \r\n    showSlide(slideIndex);\r\n}\r\n\r\nfunction showSlide() {\r\n    dots.forEach((dot, index) => {\r\n        dot.addEventListener('click', () => {\r\n            slides[slideIndex].classList.remove('img_active');\r\n            dots[slideIndex].classList.remove('dot_active');\r\n                \r\n            slideIndex = index;\r\n                \r\n            slides[slideIndex].classList.add('img_active');\r\n            dots[slideIndex].classList.add('dot_active');\r\n        });\r\n    });\r\n}  \r\n\r\nsliderAuto();  ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export {arrBookInCart, countCart, countBookInCart};\r\n\r\nlet arrBookInCart = [];\r\nlet countBooks = document.querySelector('.countBookInCart');\r\n\r\nfunction countBookInCart(key) {\r\n    if(localStorage[key]) {\r\n        countBooks.innerText = JSON.parse(localStorage.getItem('BookInCart')).length;\r\n        arrBookInCart = JSON.parse(localStorage.getItem('BookInCart'));\r\n    } else {\r\n        countBooks.innerText = 0;\r\n        arrBookInCart = [];\r\n    }\r\n}\r\n\r\nfunction countCart() {\r\n    let btnBuy = document.querySelectorAll('.book_btn');\r\n    btnBuy.forEach((item) => {\r\n        item.addEventListener('click', event => {\r\n            btnBuy = event.target.closest('.book_btn');   \r\n            btnBuy.classList.toggle('book_btn-inTheCart');\r\n        \r\n        //добавляем книгу в корзину\r\n        if(btnBuy.classList.contains('book_btn-inTheCart')) {     \r\n            btnBuy.innerHTML = 'IN THE CART';\r\n            arrBookInCart.push(item.id);\r\n            saveBooks();\r\n            countBooks.innerText = arrBookInCart.length;\r\n\r\n        //убираем книгу из корзины\r\n        }else{\r\n            btnBuy.innerHTML = 'BUY NOW';\r\n            let index = arrBookInCart.indexOf(item.id);\r\n            arrBookInCart.splice(index, 1);\r\n            saveBooks();\r\n            countBooks.innerText = arrBookInCart.length;\r\n        }\r\n        });\r\n    });\r\n}\r\n\r\nfunction saveBooks() {\r\n    localStorage.setItem('BookInCart', JSON.stringify(arrBookInCart));\r\n}","import {countCart, arrBookInCart, countBookInCart} from './cart';\r\n\r\nconst booksCategory = document.querySelectorAll('.books__categories_link');\r\nconst booksCard = document.querySelector('.books__cards');\r\nconst btnLoadMore = document.querySelector('.btn_loadMore');\r\nconst star = `<svg width=\"12\" height=\"11\" viewBox=\"0 0 12 11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path d=\"M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z\" fill=\"#F2C94C\"/>\r\n</svg>`;\r\n\r\nlet startIndex = 0;\r\nlet subject = 'Architecture';\r\nlet textBtnBook = 'BUY NOW';\r\n\r\nlet requestURL = `https://www.googleapis.com/books/v1/volumes?key=AIzaSyCD8pbuLqrpZzOGbCfm17GqVL-RX7nNPxU&printType=books&&maxResults=6&langRestrict=en`;\r\n\r\n//отправляем запрос \r\nfunction sendRequest() {\r\n    return fetch(requestURL + `&q=${subject}&startIndex=${startIndex}`).then(response => {\r\n        return response.json();\r\n    });\r\n}\r\n\r\n//отображаем запрос\r\nasync function resultRequest() {     \r\n    const data = await sendRequest();    \r\n    const dataItems = data.items;\r\n    drawBooks(dataItems);\r\n    countCart();\r\n}\r\n\r\n//снимаем .link_active с категории\r\nfunction clearActiveCategory() {\r\n    document.querySelector('.books__categories_link.link_active').classList.remove('link_active');\r\n}\r\n\r\n//меняем активную актегорию\r\nfunction toggleBookCategory()  {\r\n    booksCategory.forEach((item) => {\r\n        item.addEventListener('click', (event) => {\r\n            let categoryObj = event.target.closest('.books__categories_link');\r\n            clearActiveCategory();\r\n            categoryObj.classList.add('link_active');\r\n\r\n            if(item.classList.contains('link_active')) {\r\n                categoryObj = item.innerText;\r\n            }\r\n            \r\n            booksCard.innerHTML = '';\r\n         \r\n            subject = `${categoryObj}`;\r\n            startIndex = 0;\r\n            resultRequest();\r\n        });\r\n    });\r\n}\r\n\r\n//обработчик кнопки LoadMore\r\nfunction loadMore() {\r\n    btnLoadMore.addEventListener('click', () => {\r\n        startIndex += 6; \r\n        resultRequest();         \r\n    });\r\n}\r\n\r\n//отрисовываем рейтинг звезды\r\nfunction ratingStars(rating) {\r\n    let result = '';\r\n    for (let i = 0; i < 5; i++) {\r\n        if (i < rating) {\r\n            result += star;\r\n        } \r\n    }\r\n    return result;\r\n}\r\n\r\n\r\n//проверка localstorage на заполнение\r\nfunction checkBookInLocalStorage(bookId) {\r\n    let result = false;\r\n    for (let i = 0; i <= arrBookInCart.length; i++) {\r\n        if (bookId === arrBookInCart[i]) {\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n//отрисовываем карточки книг\r\nfunction drawBooks(book) {\r\n    book.forEach(item => {\r\n        let books = `<div class=\"book_container\">\r\n                        <img class=\"${item.volumeInfo?.imageLinks?.thumbnail ? \"book_img\" : \"book_placeholder\"}\" src=\"${item.volumeInfo?.imageLinks?.thumbnail}\" alt=\"Book card\"></img>\r\n                        <div class=\"book_info\">\r\n                            <p class=\"${item.volumeInfo?.authors? \"book_author\" : \"display-none\"}\">${item.volumeInfo?.authors}</p>\r\n                            <h2 class=\"book_title\">${item.volumeInfo?.title}</h2>\r\n                            <div class=\"${item.volumeInfo?.averageRating ? \"book_rating\" : \"display-none\"}\">\r\n                                <div class=\"${item.volumeInfo?.averageRating ? \"book_rating-stars\" : \"display-none\"}\">${item.volumeInfo?.averageRating ? ratingStars(item.volumeInfo.averageRating) : 'no rating'}</div>\r\n                                <div class=\"${item.volumeInfo?.ratingsCount ? \"book_rating-review\" : \"display-none\"}\">${item.volumeInfo?.ratingsCount} review</div>\r\n                            </div>\r\n                            <div class=\"book_description\">${item.volumeInfo?.description ? item.volumeInfo?.description : 'No description'}</div>\r\n                            <div class=\"${item.saleInfo?.retailPrice?.amount? \"book_price\" : \"display-none\"}\">${item.saleInfo?.retailPrice?.amount} ${item.saleInfo?.retailPrice?.currencyCode}</div>\r\n                            <button class=\"${checkBookInLocalStorage(item.id)? \"book_btn book_btn-inTheCart\" : \"book_btn\"}\" id=\"${item.id}\">${textBtnBook}</button>\r\n                        </div>\r\n                    </div>`;\r\n    booksCard.innerHTML += books;\r\n    });\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n    countBookInCart('BookInCart');\r\n    resultRequest();\r\n    loadMore();\r\n    toggleBookCategory(); \r\n});"],"names":["slides","document","querySelectorAll","dots","slideIndex","setInterval","classList","remove","length","add","forEach","dot","index","addEventListener","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","arrBookInCart","countBooks","querySelector","saveBooks","localStorage","setItem","JSON","stringify","booksCategory","booksCard","btnLoadMore","star","startIndex","subject","textBtnBook","requestURL","async","resultRequest","fetch","then","response","json","items","item","books","volumeInfo","imageLinks","thumbnail","authors","title","averageRating","rating","result","i","ratingStars","ratingsCount","description","saleInfo","retailPrice","amount","currencyCode","bookId","checkBookInLocalStorage","id","innerHTML","btnBuy","event","target","closest","toggle","contains","push","innerText","indexOf","splice","countCart","parse","getItem","categoryObj"],"sourceRoot":""}